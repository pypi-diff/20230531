# Comparing `tmp/odoo14_addon_community_maps-14.0.0.1.3-py3-none-any.whl.zip` & `tmp/odoo14_addon_community_maps-14.0.0.1.4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,44 +1,45 @@
-Zip file size: 56407 bytes, number of entries: 42
--rw-r--r--  2.0 unx       93 b- defN 23-Mar-17 03:12 odoo/addons/community_maps/__init__.py
--rw-r--r--  2.0 unx     1064 b- defN 23-May-26 17:12 odoo/addons/community_maps/__manifest__.py
--rw-r--r--  2.0 unx       31 b- defN 23-Mar-17 03:12 odoo/addons/community_maps/controllers/__init__.py
--rw-r--r--  2.0 unx      921 b- defN 23-Mar-24 11:10 odoo/addons/community_maps/controllers/cm_map_controller.py
--rw-r--r--  2.0 unx      515 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/__init__.py
--rw-r--r--  2.0 unx      357 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_crowdfunding_notification.py
--rw-r--r--  2.0 unx      351 b- defN 23-Mar-20 07:18 odoo/addons/community_maps/models/cm_crowdfunding_notification_request.py
--rw-r--r--  2.0 unx     1649 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_filter.py
--rw-r--r--  2.0 unx     1074 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_filter_group.py
--rw-r--r--  2.0 unx     2342 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_form_model.py
--rw-r--r--  2.0 unx     5858 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_form_submission.py
--rw-r--r--  2.0 unx      351 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_form_submission_metadata.py
--rw-r--r--  2.0 unx    15824 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_map.py
--rw-r--r--  2.0 unx     1560 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_map_colorschema.py
--rw-r--r--  2.0 unx      403 b- defN 23-Mar-20 07:20 odoo/addons/community_maps/models/cm_metadata.py
--rw-r--r--  2.0 unx      272 b- defN 23-Mar-20 07:21 odoo/addons/community_maps/models/cm_partner.py
--rw-r--r--  2.0 unx    28122 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_place.py
--rw-r--r--  2.0 unx     2794 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_place_category.py
--rw-r--r--  2.0 unx      371 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_place_presenter_metadata.py
--rw-r--r--  2.0 unx      728 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_presenter_model.py
--rw-r--r--  2.0 unx     1909 b- defN 23-May-26 17:04 odoo/addons/community_maps/models/cm_slug_id_mixin.py
--rw-r--r--  2.0 unx      663 b- defN 23-Mar-24 11:08 odoo/addons/community_maps/models/cm_utils.py
--rw-r--r--  2.0 unx     1043 b- defN 23-May-26 17:04 odoo/addons/community_maps/security/ir.model.access.csv
--rw-r--r--  2.0 unx     2638 b- defN 23-May-26 17:04 odoo/addons/community_maps/security/rules.xml
--rw-r--r--  2.0 unx       29 b- defN 23-Mar-27 14:20 odoo/addons/community_maps/services/__init__.py
--rw-r--r--  2.0 unx     8339 b- defN 23-May-26 17:04 odoo/addons/community_maps/services/cm_map_service.py
--rw-r--r--  2.0 unx    21929 b- defN 23-Mar-17 03:12 odoo/addons/community_maps/static/src/img/community_maps_odoo_icon.png
--rw-r--r--  2.0 unx     2609 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_filter_group.xml
--rw-r--r--  2.0 unx     2737 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_form_model.xml
--rw-r--r--  2.0 unx     5063 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_form_submission.xml
--rw-r--r--  2.0 unx     5922 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_map.xml
--rw-r--r--  2.0 unx     2189 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_map_colorschema.xml
--rw-r--r--  2.0 unx      171 b- defN 23-Mar-20 02:33 odoo/addons/community_maps/views/cm_menu_root.xml
--rw-r--r--  2.0 unx      135 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_menu_root_config.xml
--rw-r--r--  2.0 unx     8370 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_place.xml
--rw-r--r--  2.0 unx     2197 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_place_category.xml
--rw-r--r--  2.0 unx      770 b- defN 23-Mar-17 03:12 odoo/addons/community_maps/views/cm_place_presenter_metadata.xml
--rw-r--r--  2.0 unx     1798 b- defN 23-May-26 17:04 odoo/addons/community_maps/views/cm_presenter_model.xml
--rw-r--r--  2.0 unx      599 b- defN 23-May-26 17:12 odoo14_addon_community_maps-14.0.0.1.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-26 17:12 odoo14_addon_community_maps-14.0.0.1.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-26 17:12 odoo14_addon_community_maps-14.0.0.1.3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     4542 b- defN 23-May-26 17:12 odoo14_addon_community_maps-14.0.0.1.3.dist-info/RECORD
-42 files, 138429 bytes uncompressed, 48745 bytes compressed:  64.8%
+Zip file size: 57560 bytes, number of entries: 43
+-rw-r--r--  2.0 unx       93 b- defN 23-May-31 07:45 odoo/addons/community_maps/__init__.py
+-rw-r--r--  2.0 unx     1006 b- defN 23-May-31 10:55 odoo/addons/community_maps/__manifest__.py
+-rw-r--r--  2.0 unx       31 b- defN 23-Apr-26 15:58 odoo/addons/community_maps/controllers/__init__.py
+-rw-r--r--  2.0 unx      921 b- defN 23-May-22 10:44 odoo/addons/community_maps/controllers/cm_map_controller.py
+-rw-r--r--  2.0 unx      515 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/__init__.py
+-rw-r--r--  2.0 unx      357 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_crowdfunding_notification.py
+-rw-r--r--  2.0 unx      351 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_crowdfunding_notification_request.py
+-rw-r--r--  2.0 unx     3395 b- defN 23-May-31 10:46 odoo/addons/community_maps/models/cm_filter.py
+-rw-r--r--  2.0 unx     1074 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_filter_group.py
+-rw-r--r--  2.0 unx     2342 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_form_model.py
+-rw-r--r--  2.0 unx     5858 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_form_submission.py
+-rw-r--r--  2.0 unx      351 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_form_submission_metadata.py
+-rw-r--r--  2.0 unx    16104 b- defN 23-May-31 10:46 odoo/addons/community_maps/models/cm_map.py
+-rw-r--r--  2.0 unx     1560 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_map_colorschema.py
+-rw-r--r--  2.0 unx      386 b- defN 23-Apr-26 15:58 odoo/addons/community_maps/models/cm_metadata.py
+-rw-r--r--  2.0 unx      272 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_partner.py
+-rw-r--r--  2.0 unx    28174 b- defN 23-May-31 10:52 odoo/addons/community_maps/models/cm_place.py
+-rw-r--r--  2.0 unx     2794 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_place_category.py
+-rw-r--r--  2.0 unx      371 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_place_presenter_metadata.py
+-rw-r--r--  2.0 unx      728 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_presenter_model.py
+-rw-r--r--  2.0 unx     1909 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_slug_id_mixin.py
+-rw-r--r--  2.0 unx      663 b- defN 23-May-22 10:44 odoo/addons/community_maps/models/cm_utils.py
+-rw-r--r--  2.0 unx     1043 b- defN 23-May-22 10:44 odoo/addons/community_maps/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     2638 b- defN 23-May-22 10:44 odoo/addons/community_maps/security/rules.xml
+-rw-r--r--  2.0 unx       29 b- defN 23-May-22 10:44 odoo/addons/community_maps/services/__init__.py
+-rw-r--r--  2.0 unx     8339 b- defN 23-May-22 10:44 odoo/addons/community_maps/services/cm_map_service.py
+-rw-r--r--  2.0 unx      865 b- defN 23-Apr-26 15:58 odoo/addons/community_maps/services/cm_ping_service.py
+-rw-r--r--  2.0 unx    21929 b- defN 23-Apr-26 15:58 odoo/addons/community_maps/static/src/img/community_maps_odoo_icon.png
+-rw-r--r--  2.0 unx     2593 b- defN 23-May-31 10:46 odoo/addons/community_maps/views/cm_filter_group.xml
+-rw-r--r--  2.0 unx     2721 b- defN 23-May-31 10:46 odoo/addons/community_maps/views/cm_form_model.xml
+-rw-r--r--  2.0 unx     5063 b- defN 23-May-22 10:44 odoo/addons/community_maps/views/cm_form_submission.xml
+-rw-r--r--  2.0 unx     5969 b- defN 23-May-31 10:46 odoo/addons/community_maps/views/cm_map.xml
+-rw-r--r--  2.0 unx     2189 b- defN 23-May-22 10:44 odoo/addons/community_maps/views/cm_map_colorschema.xml
+-rw-r--r--  2.0 unx      171 b- defN 23-May-22 10:44 odoo/addons/community_maps/views/cm_menu_root.xml
+-rw-r--r--  2.0 unx      135 b- defN 23-May-22 10:44 odoo/addons/community_maps/views/cm_menu_root_config.xml
+-rw-r--r--  2.0 unx     8768 b- defN 23-May-31 10:53 odoo/addons/community_maps/views/cm_place.xml
+-rw-r--r--  2.0 unx     2197 b- defN 23-May-22 10:44 odoo/addons/community_maps/views/cm_place_category.xml
+-rw-r--r--  2.0 unx      770 b- defN 23-Apr-26 15:58 odoo/addons/community_maps/views/cm_place_presenter_metadata.xml
+-rw-r--r--  2.0 unx     1798 b- defN 23-May-22 10:44 odoo/addons/community_maps/views/cm_presenter_model.xml
+-rw-r--r--  2.0 unx      554 b- defN 23-May-31 10:56 odoo14_addon_community_maps-14.0.0.1.4.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-31 10:56 odoo14_addon_community_maps-14.0.0.1.4.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-31 10:56 odoo14_addon_community_maps-14.0.0.1.4.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     4652 b- defN 23-May-31 10:56 odoo14_addon_community_maps-14.0.0.1.4.dist-info/RECORD
+43 files, 141775 bytes uncompressed, 49714 bytes compressed:  64.9%
```

## zipnote {}

```diff
@@ -72,14 +72,17 @@
 
 Filename: odoo/addons/community_maps/services/__init__.py
 Comment: 
 
 Filename: odoo/addons/community_maps/services/cm_map_service.py
 Comment: 
 
+Filename: odoo/addons/community_maps/services/cm_ping_service.py
+Comment: 
+
 Filename: odoo/addons/community_maps/static/src/img/community_maps_odoo_icon.png
 Comment: 
 
 Filename: odoo/addons/community_maps/views/cm_filter_group.xml
 Comment: 
 
 Filename: odoo/addons/community_maps/views/cm_form_model.xml
@@ -108,20 +111,20 @@
 
 Filename: odoo/addons/community_maps/views/cm_place_presenter_metadata.xml
 Comment: 
 
 Filename: odoo/addons/community_maps/views/cm_presenter_model.xml
 Comment: 
 
-Filename: odoo14_addon_community_maps-14.0.0.1.3.dist-info/METADATA
+Filename: odoo14_addon_community_maps-14.0.0.1.4.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_community_maps-14.0.0.1.3.dist-info/WHEEL
+Filename: odoo14_addon_community_maps-14.0.0.1.4.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_community_maps-14.0.0.1.3.dist-info/top_level.txt
+Filename: odoo14_addon_community_maps-14.0.0.1.4.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_community_maps-14.0.0.1.3.dist-info/RECORD
+Filename: odoo14_addon_community_maps-14.0.0.1.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/community_maps/__manifest__.py

```diff
@@ -5,17 +5,16 @@
     'summary': """
     Module to create and manage your map visualizations into a  website""",
 
     'author': "Coopdevs Treball SCCL",
     'website': "https://gitlab.com/coopdevs/community-maps-builder-backend",
 
     'category': 'community-maps',
-    'version': '14.0.0.1.3',
+    'version': '14.0.0.1.4',
 
-    # any module necessary for this one to work correctly
     'depends': [
         'base',
         'base_rest',
         'base_rest_base_structure',
         'sale',
         'crm',
         'metadata'
```

## odoo/addons/community_maps/models/cm_filter.py

```diff
@@ -3,14 +3,69 @@
 
 
 class CmFilter(models.Model):
     _name = "cm.filter"
 
     _inherit = ["cm.slug.id.mixin"]
 
+    # TODO: Create Mixin and color must be selection field üôè
+    _color_schema = {
+        'brand': {
+            'text': 'text-brand-button',
+            'border': 'border-brand-base',
+            'bg': 'bg-brand-button'
+        },
+        'black': {
+            'text': 'text-gray-700',
+            'border': 'border-gray-800',
+            'bg': 'bg-gray-700/30'
+        },
+        'pink': {
+            'text': 'text-pink-900',
+            'border': 'border-pink-800',
+            'bg': 'bg-pink-300'
+        },
+        'lime': {
+            'text': 'text-lime-800',
+            'border': 'border-lime-800',
+            'bg': 'bg-lime-500'
+        },
+        'green': {
+            'text': 'text-green-800',
+            'border': 'border-green-800',
+            'bg': 'bg-green-500'
+        },
+        'blue': {
+            'text': 'text-blue-900',
+            'border': 'border-blue-900',
+            'bg': 'bg-blue-300'
+        },
+        'violet': {
+            'text': 'text-violet-800',
+            'border': 'border-violet-800',
+            'bg': 'bg-violet-300'
+        },
+        'yellow': {
+            'text': 'text-yellow-800',
+            'border': 'border-yellow-800',
+            'bg': 'bg-yellow-500'
+        },
+        'red': {
+            'text': 'text-red-900',
+            'border': 'border-red-800',
+            'bg': 'bg-red-400'
+        },
+        'gray': {
+            'textColor': 'text-neutral-800',
+            'border': 'border-neutral-800',
+            'bg': 'bg-neutral-400'
+        },
+    }
+
+
     name = fields.Char(string=_("Name"), translate=True)
     icon = fields.Char(string=_("Icon"))
     color = fields.Char(string=_("Color"))
     marker_color = fields.Char(string=_("Marker main color (hex)"))
     marker_text_color = fields.Char(string=_("Marker text color (hex)"))
     marker_bg_color = fields.Char(string=_("Marker background color (hex)"))
     marker_border_color = fields.Char(string=_("Marker border color (hex)"))
@@ -21,20 +76,25 @@
         "cm_places_filters",
         "filter_id",
         "place_id",
         string=_("Related places"),
     )
 
     def get_datamodel_dict(self):
+        icon = self.icon or ""
         datamodel = {
             "slug": self.slug_id,
+            "title": self.name,
             "name": self.name,
+            'group': self.filter_group_id.slug_id,
+            'icon_class': icon.replace('_', '-'),
             "iconKey": None,
             "iconColor": None,
-            "markerColor": {
+            'color': self._color_schema[self.color],
+            "filterColor": {
                 "markerText": self.marker_text_color,
                 "markerColor": self.marker_color,
                 "markerBg": self.marker_bg_color,
                 "markerBorder": self.marker_border_color
             },
             "description": None,
         }
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## odoo/addons/community_maps/models/cm_map.py

```diff
@@ -1,14 +1,20 @@
 import json
 from odoo import models, api, fields
 from odoo.tools.translate import _
 from odoo.addons.community_maps.models.cm_utils import CmUtils
 from odoo.exceptions import ValidationError
 
 
+MARKER_STYLES = [
+    ("slim", _("Slim")),
+    ("rounded", _("Rounded")),
+]
+
+
 class CmMap(models.Model):
     _name = "cm.map"
 
     _inherit = ["cm.slug.id.mixin"]
 
     active = fields.Boolean(string=_("Active"), default=True)
     company_id = fields.Many2one(
@@ -124,14 +130,20 @@
     lat_default = fields.Char(string=_("Default Latitude"))
     lng_default = fields.Char(string=_("Default Longitude"))
     # CRM team for submission creation
     crm_team_id = fields.Many2one(
         'crm.team',
         string=_("CRM Team for place submissions (leads)")
     )
+    marker_style = fields.Selection(
+        selection=MARKER_STYLES,
+        default='slim',
+        required=True,
+        string=_("Marker style"),
+    )
 
     # TODO: add constrains to not allow map creation without categories and presenters.
     @api.constrains(
         "allow_filter_by_crowdfunding",
         "crowdfunding_type",
         "show_progress_on_marker"
     )
@@ -172,14 +184,15 @@
             "latDefault": self.lat_default,
             "lngDefault": self.lng_default,
             "proposalCtaLabel": self.proposal_cta_title,
             "proposalFormLabel": self.proposal_form_title,
             "proposalFormStepCategoryLabel": self.proposal_form_subtitle_step_category,
             "proposalFormStepAddressLabel": self.proposal_form_subtitle_step_address,
             "proposalFormStepFormLabel": self.proposal_form_subtitle_step_form,
+            "markerStyle": self.marker_style
         }
 
     def get_places_datamodel_dict(self):
         places = []
         for place in self.place_ids:
             if place.status == "published" and place.type == "place":
                 places.append(place.get_datamodel_dict())
```

## odoo/addons/community_maps/models/cm_metadata.py

```diff
@@ -1,14 +1,13 @@
 from odoo import models, api, fields
 from odoo.tools.translate import _
 
-
 class CMetadata(models.Model):
-    _name = "cm.metadata"
+  _name = 'cm.metadata'
 
-    type = fields.Char(string=_("Type"))
-    format = fields.Char(string=_("Format"))
-    key = fields.Char(string=_("Key"))
-    value = fields.Char(string=_("Value"), translate=True)
-    sort_order = fields.Integer(string=_("Sort order"))
+  type = fields.Char(string=_("Type"))
+  format = fields.Char(string=_("Format"))
+  key = fields.Char(string=_("Key"))
+  value = fields.Char(string=_("Value"),translate=True)
+  sort_order = fields.Integer(string=_("Sort order"))
 
-    _order = "sort_order asc"
+  _order = "sort_order asc"
```

## odoo/addons/community_maps/models/cm_place.py

```diff
@@ -134,36 +134,42 @@
     proposal_form_submission_id = fields.Many2one(
         'crm.lead',
         string=_("Proposal submission"),
         ondelete='restrict')
     submission_ok_message = fields.Text(
         string=_("Successful message"),
         compute='_get_submission_ok_message',
-        store=True)
+        store=False)
     submission_ok_email_template_id = fields.Many2one(
         'mail.template',
         compute='_get_submission_ok_email_template_id',
         string=_("Successful email template"),
-        store=True)
+        store=False)
     crowdfunding_notification_ids = fields.One2many(
         'cm.crowdfunding.notification',
         'place_id',
         string=_("Notifications"))
     filter_mids = fields.Many2many(
         'cm.filter',
         'cm_places_filters',
         'place_id',
         'filter_id',
         string=_("Custom filters")
     )
+    marker_color = fields.Many2one(
+        'cm.filter',
+        string=_("Overwritte category color with"),
+    )
+
     # Interaction method
     interaction_method = fields.Selection(selection=[
         ('none', _('None')),
         ('form', _('Form')),
         ('external_link', _('External link')),
+        ('both', _('Both')),
     ], default='form', required=True, string=_("Interaction method"))
     external_link_url = fields.Char(
         string=_("External link URL"), translate=True)
     external_link_target = fields.Selection(selection=[
         ('_blank', _('Open in a new tab')),
         ('_top', _('Open in the same page'))
     ], default='_blank', required=True, string=_("Target link"))
@@ -442,18 +448,27 @@
             for metadata in self.place_presenter_metadata_ids:
                 place_presenter_metadata_ids.append((2, metadata.id))
         # create metas
         setattr(self, metas_relation, place_presenter_metadata_ids)
 
     # DATAMODEL / API
     def _build_base_datamodel(self):
+        if self.marker_color:
+            marker_color = self.marker_color.get_datamodel_dict().get(
+                'filterColor', {}
+            )
+        else:
+            marker_color = self._get_category_data_datamodel_dict().get(
+                'categoryColor', {}
+            )
         place_dict = {
             'name': self.name,
             'slug': self.slug_id,
             'map_slug': self.map_id.slug_id,
+            'marker_color': marker_color,
             'category_slug': self.place_category_id.slug_id,
             'category_data': self._get_category_data_datamodel_dict(),
             'category': self.place_category_id.name,
             'interaction_method': self.interaction_method,
             'form_slug': None,
             'external_link_url': None,
             'external_link_target': None,
@@ -471,17 +486,17 @@
             place_dict['active'] = self.has_active_service
         if self.crowdfunding_type != 'none':
             if self.completed_percentage > 100:
                 completed_percentage_return = 100
             else:
                 completed_percentage_return = self.completed_percentage
             place_dict['goalProgress'] = completed_percentage_return
-        if self.interaction_method == 'form' and self.form_model_id:
+        if self.interaction_method in ['form', 'both'] and self.form_model_id:
             place_dict['form_slug'] = self.form_model_id.slug_id
-        elif self.interaction_method == 'external_link':
+        if self.interaction_method in ['external_link', 'both']:
             place_dict['external_link_url'] = self.external_link_url
             place_dict['external_link_target'] = self.external_link_target
             place_dict['external_link_cta_txt'] = \
                 self.map_id.external_link_cta_txt
         return place_dict
 
     def _get_filters_datamodel_dict(self):
@@ -489,34 +504,24 @@
         for filter in self.filter_mids:
             filters.append(filter.slug_id)
         return filters
 
     def _get_filters_data_datamodel_dict(self):
         filters = []
         for filter in self.filter_mids:
-            filters.append({
-                'title': filter.name,
-                'group': filter.filter_group_id.slug_id,
-                'icon_class': filter.icon.replace('_', '-'),
-                'color': self._color_schema[filter.color],
-                "markerColor": {
-                    "markerText": filter.marker_text_color,
-                    "markerColor": filter.marker_color,
-                    "markerBg": filter.marker_bg_color,
-                    "markerBorder": filter.marker_border_color
-                }
-            })
+            filters.append(filter.get_datamodel_dict())
         return filters
 
     def _get_category_data_datamodel_dict(self):
+        # TODO: Move into category model üôè
         return {
             'title': self.place_category_id.name,
             'icon_class': self.place_category_id.icon.replace('_', '-'),
             'color': self._color_schema[self.place_category_id.color],
-            "markerColor": {
+            "categoryColor": {
                 "markerText": self.place_category_id.marker_text_color,
                 "markerColor": self.place_category_id.marker_color,
                 "markerBg": self.place_category_id.marker_bg_color,
                 "markerBorder": self.place_category_id.marker_border_color
             }
         }
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## odoo/addons/community_maps/views/cm_filter_group.xml

### odoo/addons/community_maps/views/cm_filter_group.xml

```diff
@@ -47,15 +47,15 @@
                         <field name="marker_text_color" required="True"/>
                         <field name="marker_bg_color" required="True"/>
                         <field name="marker_border_color" required="True"/>
                         <field name="description"/>
                       </group>
                     </form>
                   </field>
-                  <field name="allowed_in_map_mids" readonly="True"/>
+                  <field name="allowed_in_map_mids"/>
                 </group>
               </page>
             </notebook>
           </sheet>
         </form>
       </field>
     </record>
```

## odoo/addons/community_maps/views/cm_form_model.xml

### odoo/addons/community_maps/views/cm_form_model.xml

```diff
@@ -32,15 +32,15 @@
                   <field name="slug_id" attrs="{'required': True}"/>
                   <field name="cta_label" attrs="{'required': True}"/>
                   <field name="button_label" attrs="{'required': True}"/>
                   <field name="generate_submission_in_proposal"/>
                   <field name="submission_ok_message" attrs="{'required': True}"/>
                   <field name="submission_ok_email_template_id"/>
                   <field name="follower_partner_id"/>
-                  <field name="allowed_in_map_mids" readonly="True"/>
+                  <field name="allowed_in_map_mids"/>
                 </group>
               </page>
               <page string="Form Json Schema">
                 <group>
                   <field name="json_initial_data" attrs="{'required': True}"/>
                   <field name="json_schema" attrs="{'required': True}"/>
                   <field name="json_uischema" attrs="{'required': True}"/>
```

## odoo/addons/community_maps/views/cm_map.xml

### odoo/addons/community_maps/views/cm_map.xml

```diff
@@ -46,14 +46,15 @@
                 <group>
                   <field name="privacy_link"/>
                   <field name="cookies_link"/>
                 </group>
                 <group>
                   <field name="show_progress_on_marker"/>
                   <field name="show_no_opacity_marker"/>
+                  <field name="marker_style"/>
                 </group>
                 <group>
                   <field name="allow_filter_by_status"/>
                   <field name="allow_filter_by_category"/>
                   <field name="allow_filter_by_crowdfunding"/>
                   <field name="allow_filter_by_filter"/>
                 </group>
```

## odoo/addons/community_maps/views/cm_place.xml

### odoo/addons/community_maps/views/cm_place.xml

```diff
@@ -78,19 +78,20 @@
               <field name="filter_mids" widget="many2many_list" attrs="{'invisible': [('map_id', '=', False)]}" required="True">
                 <tree create="true" edit="false" delete="true" open="false">
                   <field name="name"/>
                   <field name="slug_id"/>
                   <field name="filter_group_id"/>
                 </tree>
               </field>
+              <field name="marker_color" options="{'no_create': True, 'no_create_edit': True}" domain="[('id', 'in', filter_mids)]"/>
               <field name="presenter_model_id" options="{'no_create': True, 'no_create_edit': True}" attrs="{'invisible': [('map_id', '=', False)]}" required="True"/>
               <field name="interaction_method" required="True" attrs="{'invisible': [('map_id', '=', False)]}"/>
-              <field name="external_link_url" attrs="{'invisible': [('interaction_method', '!=', 'external_link')], 'required': [('interaction_method', '=', 'link')]}"/>
-              <field name="external_link_target" attrs="{'invisible': [('interaction_method', '!=', 'external_link')], 'required': [('interaction_method', '=', 'link')]}"/>
-              <field name="form_model_id" attrs="{'invisible': [('interaction_method', '!=', 'form')]}"/>
+              <field name="external_link_url" attrs="{'invisible': [('interaction_method', 'not in', ['external_link', 'both'])], 'required': [('interaction_method', 'in', ['external_link', 'both'])]}"/>
+              <field name="external_link_target" attrs="{'invisible': [('interaction_method', 'not in', ['external_link', 'both'])], 'required': [('interaction_method', 'in', ['external_link', 'both'])]}"/>
+              <field name="form_model_id" attrs="{'invisible': [('interaction_method', 'not in', ['form', 'both'])]}"/>
             </group>
             <notebook>
               <page string="Crowdfunding">
                 <group>
                   <field name="crowdfunding_type"/>
                   <field name="completed_percentage" attrs="{'invisible': [('crowdfunding_type','=','none')]}"/>
                   <field name="invoiced_target" attrs="{'invisible': [('crowdfunding_type', '!=', 'invoicing_amount')]}" required="True"/>
@@ -134,14 +135,18 @@
               <page string="Proposal Data">
                 <group>
                   <field name="proposal_form_submission_id"/>
                 </group>
               </page>
             </notebook>
           </sheet>
+          <div class="oe_chatter">
+            <field name="message_follower_ids"/>
+            <field name="message_ids" options="{'post_refresh': 'recipients'}"/>
+          </div>
         </form>
       </field>
     </record>
     <menuitem name="Places" id="community_maps.place" parent="community_maps.menu_root" action="view_place_window"/>
     <menuitem name="Place proposals" id="community_maps.place_proposal" parent="community_maps.menu_root" action="view_place_proposal_window"/>
   </data>
 </odoo>
```

## Comparing `odoo14_addon_community_maps-14.0.0.1.3.dist-info/METADATA` & `odoo14_addon_community_maps-14.0.0.1.4.dist-info/METADATA`

 * *Files 10% similar despite different names*

```diff
@@ -1,20 +1,15 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-community-maps
-Version: 14.0.0.1.3
+Version: 14.0.0.1.4
 Summary: Module to create and manage your map visualizations into a website
 Home-page: https://gitlab.com/coopdevs/community-maps-builder-backend
 Author: Coopdevs Treball SCCL
-License: UNKNOWN
-Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 14.0
 Requires-Python: >=3.6
 Requires-Dist: odoo14-addon-base-rest
 Requires-Dist: odoo14-addon-base-rest-base-structure
 Requires-Dist: odoo14-addon-metadata
 Requires-Dist: odoo (<14.1dev,>=14.0a)
 
-UNKNOWN
-
-
```

## Comparing `odoo14_addon_community_maps-14.0.0.1.3.dist-info/RECORD` & `odoo14_addon_community_maps-14.0.0.1.4.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,42 +1,43 @@
 odoo/addons/community_maps/__init__.py,sha256=3nGI3V9zOH6q-rWD_R9VOZFLyXJ6KebRFVv5L4svmPY,93
-odoo/addons/community_maps/__manifest__.py,sha256=5a8us7Wld4gLeNTtECVBbxlsYvwADdbGcvqoV6kZ4Hw,1064
+odoo/addons/community_maps/__manifest__.py,sha256=LnvnTYXx6rqF7uf8JcdtH869v4viiTGnNMIO-Ct5RZU,1006
 odoo/addons/community_maps/controllers/__init__.py,sha256=EgzGpIyBpj4QL8npS96b6ChvC6RDsG8reHawYSBpoCc,31
 odoo/addons/community_maps/controllers/cm_map_controller.py,sha256=33gpY-Ja7iKrwHN0H1zi3lnUPzfV0NlLeE2ThP1ukbc,921
 odoo/addons/community_maps/models/__init__.py,sha256=OFjoyUH6p7v7vSuCCi9yCinQCOJkR9KMe7YdE9cWd-c,515
 odoo/addons/community_maps/models/cm_crowdfunding_notification.py,sha256=bMWy3tZj0EZ2fV3rEDLDJ2HfbeQ6LT8bQ-J4OwSSZm0,357
 odoo/addons/community_maps/models/cm_crowdfunding_notification_request.py,sha256=W7k3MwfUUEzpwUBjSMWq_m_gqsAAZiUgMT8f2kt2Z2Q,351
-odoo/addons/community_maps/models/cm_filter.py,sha256=sqvd9igmQiuieZfxWvGpCoD65FrW6CyGqMGqAKlx1jo,1649
+odoo/addons/community_maps/models/cm_filter.py,sha256=EneptVcQRcoDFJsmDVgYS0bFEA1pRdafl8zRDINZO4c,3395
 odoo/addons/community_maps/models/cm_filter_group.py,sha256=e7HyuJhh7EDNV0g_0xQ-F1FiZcjg9kKxUT4UVP832ic,1074
 odoo/addons/community_maps/models/cm_form_model.py,sha256=Y3cUN3rWwvPPfE1zaS2aZfJhjCRMW8HEKl0SXdYqKs0,2342
 odoo/addons/community_maps/models/cm_form_submission.py,sha256=a-sQHmuIuxccWSJg43p5l0bF79PPpl3GZp72tDvN0ZM,5858
 odoo/addons/community_maps/models/cm_form_submission_metadata.py,sha256=XiPDdwsTAFRhVM675XcP_7vLpp0efPy6j8YNMb2XmNU,351
-odoo/addons/community_maps/models/cm_map.py,sha256=d3quFBZWlaPwHgdT9IaNNed0sMb3sVKmoaDogtKUx0M,15824
+odoo/addons/community_maps/models/cm_map.py,sha256=xn6x5FWUyg2AKvfukc1r754n3byQ646Tp66l6w3QWdg,16104
 odoo/addons/community_maps/models/cm_map_colorschema.py,sha256=O1BCj8P5CujIeUzagRspARVG9MQuH_f1n8vKdPEhJK0,1560
-odoo/addons/community_maps/models/cm_metadata.py,sha256=-AvSmO9IkTlSQlPUxJOUxMWQrnsZ9BYm6zqeOpYyF64,403
+odoo/addons/community_maps/models/cm_metadata.py,sha256=Xe4mOq1Zl2ru8_4Cpss0BKk1wvAy99MYThi8n0kX5L8,386
 odoo/addons/community_maps/models/cm_partner.py,sha256=o8GJgQoYr0Gvnftepkyor3vhGJCBCfzYg7rNYLAyGf4,272
-odoo/addons/community_maps/models/cm_place.py,sha256=FV9KGPSw2JxX-L9cOW-DRql6ZGo0iVHctr9WIR1HmdU,28122
+odoo/addons/community_maps/models/cm_place.py,sha256=jZaj1q6pna2mquv9b9fP3PA7a8EqXHN8VAjHy6MZJGI,28174
 odoo/addons/community_maps/models/cm_place_category.py,sha256=xUHCzvArSQ6q8Xth0KtATO6HpmNwvsvUon3-TqcAsxk,2794
 odoo/addons/community_maps/models/cm_place_presenter_metadata.py,sha256=QpRppeTafEZYTU24rPIVHzBlOGsOQ8lvY1DSuVibcPA,371
 odoo/addons/community_maps/models/cm_presenter_model.py,sha256=U5ZEXwHFMNtOOE2ELoHOe9GmV5kFHWYdXQhcG_kTlJY,728
 odoo/addons/community_maps/models/cm_slug_id_mixin.py,sha256=Zxt2QlTKaxu-9YC2ywboU64LhPA90kTF84T9DLgJseE,1909
 odoo/addons/community_maps/models/cm_utils.py,sha256=rnuQd4YqJJjvvsoh8o1axZck8tEOJrAhVayBJiZqcs0,663
 odoo/addons/community_maps/security/ir.model.access.csv,sha256=fmcjrIGc70FfjBqXm3motliBgeF3pf3hYSTSmhaPZis,1043
 odoo/addons/community_maps/security/rules.xml,sha256=JCgklus-zkNOotOvH8RBrDsE4xBv2izEzWEi3o_MZTE,2638
 odoo/addons/community_maps/services/__init__.py,sha256=TiJjr_nNPl6lDLXRvcB1P67YQwTQRBLpQOv2ifJDtnM,29
 odoo/addons/community_maps/services/cm_map_service.py,sha256=Dj8oMpJRpEZ2_fBDtuHDfnvdJOZG0AX2NXfe5bVn7lA,8339
+odoo/addons/community_maps/services/cm_ping_service.py,sha256=paTEEzuhoWw_zx9NQvEi2M08xZP86R_adHgB8IvD2n4,865
 odoo/addons/community_maps/static/src/img/community_maps_odoo_icon.png,sha256=PUF0Dgj46wbuYpfMZWS1GqbxiEVdvRYZiBo5joXHl4E,21929
-odoo/addons/community_maps/views/cm_filter_group.xml,sha256=bUrzapoveAuvaFnpSYTbVGIx68C_IyIEsJP_Bg_G-5I,2609
-odoo/addons/community_maps/views/cm_form_model.xml,sha256=5qQCoN_bPwpSZc296w4J2AYxFgYHJfTgJggIlJuJ5AY,2737
+odoo/addons/community_maps/views/cm_filter_group.xml,sha256=pzabFyBX14LGqOYm2gmaEdwr7OAdBIgpVhVaJXGDmgo,2593
+odoo/addons/community_maps/views/cm_form_model.xml,sha256=yMj2YHs38PqEs2YkSBLz3FO8ti5mexQXbqX-3_0p8XI,2721
 odoo/addons/community_maps/views/cm_form_submission.xml,sha256=jBP8s0yuiEEQe37H9W9WGmd--mY6FunH0rFL9efrRCU,5063
-odoo/addons/community_maps/views/cm_map.xml,sha256=6m93Sb9a7CpvWVvVUqLrrhnln95J7_NxhT8DN8cmtGA,5922
+odoo/addons/community_maps/views/cm_map.xml,sha256=3mvOWbrTFpz34BPRiTAQtLpIaSXuNSVySWNhO3E842k,5969
 odoo/addons/community_maps/views/cm_map_colorschema.xml,sha256=Q-tzuSkBBsWHrt7G527CqjVcQlJGpkzJiixiFnOTpg0,2189
 odoo/addons/community_maps/views/cm_menu_root.xml,sha256=0GyEsDU__nRXMFDTmPE9dRFYm0OnEtgR5RyOKDzYzfQ,171
 odoo/addons/community_maps/views/cm_menu_root_config.xml,sha256=WSVjKyCIU_EL6Z3cPvNFNP5ZiUkBLF8An5qcibpImD8,135
-odoo/addons/community_maps/views/cm_place.xml,sha256=r26iNbyNA6x6jRdaviMEwfZs7mWC3djYwDTrRKZ5XZI,8370
+odoo/addons/community_maps/views/cm_place.xml,sha256=SN20IhM3DsP_ux8htWcrgGETYwTQ2Y3b15iUu9ASFzc,8768
 odoo/addons/community_maps/views/cm_place_category.xml,sha256=FDjR69wwdZL-apce_f5r8NhMQR4uJwj_LsfPAbr5YB8,2197
 odoo/addons/community_maps/views/cm_place_presenter_metadata.xml,sha256=onk8Re4GGkPwITJoqZhPS6WcWEFXqAUYi9zE1kadoV8,770
 odoo/addons/community_maps/views/cm_presenter_model.xml,sha256=lCjOtom262AS2ud0k72JMPgsHow3NuIbddPbwSMlypA,1798
-odoo14_addon_community_maps-14.0.0.1.3.dist-info/METADATA,sha256=VjXfwmxJqadRSi_K4xaHWgq5Jhvnt_-fIhPAhAYuGdA,599
-odoo14_addon_community_maps-14.0.0.1.3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo14_addon_community_maps-14.0.0.1.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_community_maps-14.0.0.1.3.dist-info/RECORD,,
+odoo14_addon_community_maps-14.0.0.1.4.dist-info/METADATA,sha256=eRL6xAVORLynnENnNeoWiAOg2Wy3CoPG9v6EsL1W7BA,554
+odoo14_addon_community_maps-14.0.0.1.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo14_addon_community_maps-14.0.0.1.4.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_community_maps-14.0.0.1.4.dist-info/RECORD,,
```

